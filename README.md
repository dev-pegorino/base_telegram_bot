# Описание бота
В данном коде написано базовый код telegram бота с базой данных на языке программирования python (aiogram, aiosqlite, sqlalchemy, python-dotenv, redis)

более подробно с функциями данного бота можете найти снизу:

## Функциональность

- **Проверка подписки на каналы**: Бот будет проверять постоянно при любом действии пользователя в боте, если пользователь не подписан то под присылает текст о том что нужно подписаться и выдает Inline клавиатурой список каналов/чатов на которые нужно подписаться. Если пользователь подписался на все каналы и при нажатии на кнопку "Я подписался" бот проверяет все и если все ок то бот продолжит работу с пользователем, если нет то просто выдаст диалог то что он не подписан. Все данные каналов на которые нужно подписаться находятся в базе данных таблице sub_channels
- **Система Регистрации(Простая)**:
    - **Система капчи**: Если пользователь первый раз запускает бота (нету его в базе данных) то в первую очередь он предложит решить капчу (естественно если он подписан на все каналы) (бот на рандом выдаст пример + или -) если пользователь решает правильно то он продолжает регистрацию, если нет то выдается диалог и ошибкой и с количеством попыток после этого меняется пример. Если пользователь решает примеры не правильно 3 раза то его блокируют на 10 минут и он получит диалог о блокировке. Если пользователь захочет решить когда еще не прошло 10 минут то ему показывет диалог и сколько ему осталось.
    - **Выбор языка(локализация)**: После решений капчи его просят выбрать язык который хочет использовать пользователь (русский, анг (если захотите можно будет добавить и другие))
- **Анти спам от пользователей**: Если пользователь использует одну и тоже команду, текст несколько раз в течении 4-ех секунд то бот просто скажет не так быстро и заблокирует его на 10 секунд.
- **Использование Redis**: Бот использует Redis для кэширования данных и управления сессиями, что позволяет улучшить производительность и скорость обработки запросов.

## Использование Redis

Redis — это хранилище данных в памяти, которое используется для кэширования и управления сессиями. В этом проекте Redis может быть использован для улучшения производительности бота, позволяя быстро получать доступ к часто запрашиваемым данным и управлять состоянием пользователей.

### Установка Redis

Следуйте инструкциям в разделе "Запуск Redis", чтобы установить и запустить Redis на вашей машине.

# Структура проекта

Проект организован по следующей структуре:

```
/project
│
├── app/
│   ├── database/
│   │   ├── models.py           # Модули (таблицы) для работы с базой данных
│   │   └── requests.py         # Запросы к базе данных
│   │
│   ├── handlers/               # Обработчики команд и событий
│   │   ├── users/              # Обработчики для пользователей
│   │   │   ├── callback.py      #Обработка нажатий на Inline кнопки   
│   │   │   ├── commands.py      # Команды для пользователей
│   │   │   └── reg.py          # Регистрация пользователей
│   │   └── admin.py            #Обработчики для администраторов (не реализовано)
│   │
│   ├── utils/                  # Утилиты и вспомогательные функции
│   │   ├── commands.py         # Меню команд бота
│   │   ├── functions.py        # разные функции для бота
│   │   ├── keyboards.py        # Клавиатуры
│   │   ├── middleware.py       # middleware сообщения
│   │   └── strings.py          # Строковые константы и сообщения
│
├── requirements.txt            # Список зависимостей проекта
├── .gitignore                  # Файлы и директории, игнорируемые Git
├── .env                        # Хранение токенов и другой секретная информация о боте
├── config.py                   # получение токенов и так далее с файла .env
└── run.py                      # Главный файл для запуска бота
```

## Объяснение кода

- **`run.py`**: Главный файл, который запускает бота. Здесь инициализируются необходимые компоненты и запускается основной цикл обработки событий.

- **`app/handlers/users/commands.py`**: Обработчик команд, который отвечает за выполнение команд, отправленных пользователями. Здесь реализована логика обработки различных команд.

- **`app/database/models.py`**: Определяет модели данных (таблицы), используемые в базе данных. Здесь описываются структуры данных, которые будут храниться в базе.

- **`app/utils/keyboards.py`**:  Клавиатуры, которые будут использоваться в интерфейсе бота для взаимодействия с пользователями.

- **`app/utils/strings.py`**: Содержит строковые константы и сообщения, используемые в боте. Это позволяет легко управлять текстами и изменять их в одном месте.

- **`app/database/requests.py`**: Содержит функции для выполнения запросов к базе данных, такие как добавление, удаление и получение данных.## Объяснение кода

- **`run.py`**: Главный файл, который запускает бота. Здесь инициализируются необходимые компоненты и запускается основной цикл обработки событий.

- **`app/utils/commands.py`**: Содержит функции для управления командами бота. Здесь определяются команды, которые бот может выполнять, и их описание.

- **`app/handlers/users/commands.py`**: Обработчик команд, который отвечает за выполнение команд, отправленных пользователями. Здесь реализована логика обработки различных команд.

- **`app/database/models.py`**: Определяет модели данных, используемые в базе данных. Здесь описываются структуры данных, которые будут храниться в базе.

- **`app/utils/keyboards.py`**: Определяет клавиатуры, которые будут использоваться в интерфейсе бота для взаимодействия с пользователями.

- **`app/utils/strings.py`**: Содержит строковые константы и сообщения, используемые в боте. Это позволяет легко управлять текстами и изменять их в одном месте.

- **`app/database/requests.py`**: Содержит функции для выполнения запросов к базе данных, такие как добавление, удаление и получение данных.

Эта структура и объяснение помогут другим разработчикам быстрее понять, как работает ваш проект и как его можно расширять или изменять.

# Установка и запуск

Следуйте этим шагам, чтобы установить и запустить бота:

## 1. Клонирование репозитория

Сначала клонируйте репозиторий на свой локальный компьютер:

```bash
git clone https://github.com/DevKittyIlnazik/base_telegram_bot.git
```

## 2. Переход в директорию проекта

Перейдите в директорию проекта:

```bash
cd base_telegram_bot
```

## 3. Создание и активация виртуального окружения

Создайте виртуальное окружение, чтобы изолировать зависимости проекта. Для этого выполните следующую команду:

```bash
# Для Windows
python -m venv venv

# Для macOS и Linux
python3 -m venv venv
```

После создания виртуального окружения активируйте его:

```bash
# Для Windows
venv\Scripts\activate

# Для macOS и Linux
source venv/bin/activate
```

## 4. Установка зависимостей

Убедитесь, что у вас установлен Python (рекомендуется версия 3.7 и выше). Затем установите необходимые зависимости с помощью pip:

```bash
pip install -r requirements.txt
```

## 5. Настройка переменных окружения

Перед запуском бота вам может потребоваться настроить переменные окружения, такие как токен бота. Создайте файл `.env` в корневой директории проекта и добавьте туда необходимые переменные:

```
BOT_TOKEN=ваш_токен_бота
DATABASE_URL=sqlite+aiosqlite:///app/database/bot.db
```

## 6. Запуск Redis

Чтобы запустить Redis, выполните следующие шаги в зависимости от вашей операционной системы.

### Для Windows

1. **Скачайте Redis**:
   - Перейдите на [страницу релизов Redis для Windows](https://github.com/microsoftarchive/redis/releases) и скачайте последнюю версию.

2. **Распакуйте архив**:
   - Распакуйте скачанный архив в удобное для вас место.

3. **Запустите Redis**:
   - Откройте командную строку (cmd) и перейдите в директорию, куда вы распаковали Redis.
   - Запустите Redis с помощью команды:
     ```bash
     redis-server.exe
     ```

### Для macOS

1. **Установите Homebrew** (если он еще не установлен):
   ```bash
   /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
   ```

2. **Установите Redis**:
   ```bash
   brew install redis
   ```

3. **Запустите Redis**:
   ```bash
   brew services start redis
   ```

### Для Linux

1. **Установите Redis**:
   - Для Ubuntu/Debian:
     ```bash
     sudo apt update
     sudo apt install redis-server
     ```

2. **Запустите Redis**:
   ```bash
   sudo service redis-server start
   ```

## 7. Запуск бота

Теперь вы готовы запустить бота. Используйте следующую команду:

```bash
python run.py
```

После этого бот должен запуститься и начать обрабатывать команды пользователей.

# Лицензия

Этот проект лицензирован под [MIT License](LICENSE). Вы можете свободно использовать, изменять и распространять этот проект, при условии, что вы указываете авторство и включаете копию лицензии в свои производные работы.

# Контакты

Если у вас есть вопросы или предложения, вы можете связаться с нами через наши каналы:

- **Telegram**: [ТГ канал](https://t.me/)
- **ВКонтакте**: [ВК канал](https://t.me/)

Также вы можете отправить в личное сообщения:

- **Telegram**: [ВК сообщенщ](https://t.me/)
- **ВКонтакте**: [врврв](https://t.me/)

ну или же написать нам в бот тех. поддержки:

- **Telegram**: [бот](https://t.me/)
- **ВКонтакте**: [бот](https://t.me/)